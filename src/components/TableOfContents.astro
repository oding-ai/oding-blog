---
const { headings, mobile = false } = Astro.props;
---

{mobile ? (
    <details class="toc-mobile xl:hidden mb-8 bg-neutral-50 dark:bg-[#1e1e1e] border border-muted rounded-lg px-4 py-3 group">
        <summary class="font-bold text-sm text-neutral-700 dark:text-neutral-300 cursor-pointer list-none flex justify-between items-center">
            <span>On This Page</span>
            <span class="text-xs text-muted group-open:rotate-180 transition-transform">â–¼</span>
        </summary>
        <ul class="mt-3 space-y-2 text-sm border-t border-muted/50 pt-3">
            {headings.map((heading) => (
                <li class={`toc-item depth-${heading.depth} text-neutral-600 dark:text-neutral-400`}>
                    <a href={`#${heading.slug}`} class="block py-1 hover:text-accent transition-colors">
                        {heading.text}
                    </a>
                </li>
            ))}
        </ul>
    </details>
) : (
    <nav class="toc-desktop hidden xl:block sticky top-32 ml-12 w-64">
        <h2 class="text-xs font-bold text-neutral-500 mb-4 uppercase tracking-widest">On This Page</h2>
        <ul class="space-y-2 text-sm border-l border-muted/50 pl-4">
            {headings.map((heading) => (
                <li class={`toc-item depth-${heading.depth} transition-colors hover:text-accent text-neutral-400`}>
                    <a href={`#${heading.slug}`} class="block py-1">
                        {heading.text}
                    </a>
                </li>
            ))}
        </ul>
    </nav>
)}

<style>
    .depth-3 { margin-left: 1rem; font-size: 0.95em; }
    .depth-4 { margin-left: 2rem; font-size: 0.95em; }
    
    details > summary { list-style: none; }
    details > summary::-webkit-details-marker { display: none; }
</style>
