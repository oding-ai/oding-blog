---
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/Header';
import Footer from '../components/Footer.astro';
import { getCollection } from 'astro:content';
import FormattedDate from '../components/FormattedDate.astro';

const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<BaseLayout>
	<div class="min-h-screen flex flex-col w-full md:max-w-4xl mx-auto px-4 md:px-6 md:border-x border-muted/30">
		<Header client:load />
		
		{/* Hero */}
		<section class="py-20 border-b border-muted">
			<div class="space-y-6">
				<div class="inline-flex items-center gap-2 px-3 py-1 border border-accent/20 rounded-full text-xs text-accent bg-accent/5">
					<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-cpu"><path d="M12 20v2"/><path d="M12 2v2"/><path d="M17 20v2"/><path d="M17 2v2"/><path d="M2 12h2"/><path d="M2 17h2"/><path d="M2 7h2"/><path d="M20 12h2"/><path d="M20 17h2"/><path d="M20 7h2"/><path d="M7 20v2"/><path d="M7 2v2"/><rect x="4" y="4" width="16" height="16" rx="2"/><rect x="8" y="8" width="8" height="8" rx="1"/></svg>
					<span>SYSTEM STATUS: ONLINE</span>
				</div>
				<h2 class="text-3xl md:text-5xl font-bold leading-tight">
					Cold Analysis for <br />
					<span class="text-transparent bg-clip-text bg-gradient-to-r from-accent to-emerald-600">
						Chaotic Markets
					</span>
				</h2>
				<p class="text-neutral-400 max-w-lg text-lg">
					Documenting the journey of building an autonomous crypto trading bot.
					Zero emotion, pure data.
				</p>
			</div>
		</section>

		{/* Recent Logs */}
		<main class="flex-1 py-16">
			<div class="flex items-center gap-2 mb-8 text-sm text-accent">
				<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-terminal"><path d="M12 19h8"/><path d="m4 17 6-6-6-6"/></svg>
				<span>LATEST_LOGS</span>
			</div>

			<div class="grid gap-px bg-muted border border-muted">
				{posts.map((post) => (
					<a href={`/oding-blog/blog/${post.id}/`} class="group relative bg-background p-6 hover:bg-neutral-900 transition-colors block">
						<div class="flex justify-between items-start mb-4">
							<span class="text-xs font-mono text-neutral-500">
								<FormattedDate date={post.data.pubDate} />
							</span>
							<div class="flex gap-2">
								{post.data.tags && post.data.tags.length > 0 ? (
									post.data.tags.map((tag: string) => (
										<span class="text-[10px] border border-muted/50 px-2 py-0.5 rounded text-neutral-400 group-hover:border-accent/30 group-hover:text-accent group-hover:bg-accent/5 transition-all uppercase tracking-wide">
											#{tag}
										</span>
									))
								) : (
									<span class="text-xs border border-muted px-2 py-0.5 rounded text-neutral-400 group-hover:border-accent/50 group-hover:text-accent transition-colors">
										Log
									</span>
								)}
							</div>
						</div>
						<h3 class="text-xl font-bold mb-2 group-hover:text-accent transition-colors">
							{post.data.title}
						</h3>
						<p class="text-neutral-400 text-sm leading-relaxed line-clamp-2">
							{post.data.description}
						</p>
						
						<div class="absolute top-6 right-6 opacity-0 group-hover:opacity-100 transition-opacity transform translate-x-2 group-hover:translate-x-0 text-accent">
							<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-external-link"><path d="M15 3h6v6"/><path d="M10 14 21 3"/><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/></svg>
						</div>
					</a>
				))}
			</div>
		</main>
		<Footer />
	</div>
</BaseLayout>
